<% if @user == current_user %>
  <%= render_tooltip do %>
  <%= tooltip_trigger do %>
    <div class="flex justify-center items-center p-2 mt-10">
      <%= link_to new_service_path do %>
        <i class="fa-solid fa-circle-plus text-3xl hover:cursor-pointer hover:text-primary hover:drop-shadow-md"></i>
      <% end %>
    </div>
  <% end %>
  <%= tooltip_content do %>
    <div class="grid gap-2">
      <div class="space-y-2">
        <p class="text-sm text-muted-foreground">New service</p>
      </div>
    </div>
  <% end %>
<% end %>

<% end %>
<div class="container mx-auto p-10 pt-28">
  <div class="flex flex-wrap justify-evenly items-start gap-4">

    <div class="flex flex-wrap gap-2 mb-4">
      <% Category.all.each do |category| %>
        <%= link_to category.title, services_path(q: { combined_search: "#{params.dig(:q, :combined_search)} #{category.title}".strip }), class: "filter-link" %>
      <% end %>
    </div>


    <% @services.each do |service| %>
      <div class="w-full sm:w-full md:w-1/2 lg:w-1/3 xl:w-1/4">
        <%= render_card class: "group hover:bg-primary hover:text-primary-foreground" do %>
          <div>
            <h2><%= link_to service.title.titleize, service_path(service), class: "font-semibold text-2xl hover:cursor-pointer group-hover:text-white" %></h2>
            <% if service.user == current_user %>
              <%= link_to edit_service_path(service) do %>
                <i class="fa-solid fa-pen hover:cursor-pointer hover:text-primary-foreground"></i>
              <% end %>
            <% end %>
          </div>
          <div class="flex flex-col gap-2 mt-8">
            <span><%= link_to service.user&.full_name&.titleize, user_path(service.user), class: "hover:underline hover:cursor-pointer group-hover:text-white" %></span>
            <span class="text-sm"><%= service.user.city.titleize %></span>
            <span class="text-sm font-semibold">
              <%= service.categories.map { |category| category.title.titleize }.join(", ") %>
            </span>
            <span class="text-sm"><%= number_to_currency(service.price, precision: 2, unit: "â‚±") %></span>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
