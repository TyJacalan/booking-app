
<%= turbo_frame_tag dom_id(comment, :review) do %>
  <div class="mt-4">
    <% if client %>
      <div class="w-full flex gap-2 items-center">
        <div class="w-[40px] h-[40px] rounded-full bg-[#f2f2f2] flex justify-center items-center">
          <% if client.avatar_url.present? %>
            <!-- <%= image_tag(client.avatar_url, alt: "#{client.id}_avatar") %> -->
          <% else %>
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="black">
              <path d="M480-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47ZM160-160v-112q0-34 17.5-62.5T224-378q62-31 126-46.5T480-440q66 0 130 15.5T736-378q29 15 46.5 43.5T800-272v112H160Zm80-80h480v-32q0-11-5.5-20T700-306q-54-27-109-40.5T480-360q-56 0-111 13.5T260-306q-9 5-14.5 14t-5.5 20v32Zm240-320q33 0 56.5-23.5T560-640q0-33-23.5-56.5T480-720q-33 0-56.5 23.5T400-640q0 33 23.5 56.5T480-560Zm0-80Zm0 400Z"/>
            </svg>
          <% end %>
        </div>
        <div>
          <p class="text-base font-semibold"><%= client.full_name %></p>
          <p class="text-base"><%= "#{client.city}, #{client.country}" %> - client <%= time_ago_in_words(comment.created_at) %></p>
        </div>
      </div>
      <div>
        <p><%= comment.subject %></p>
      </div>
      <div class="text-sm flex justify-end">
        <%= render_hover_card do %>
          <%= hover_card_trigger do %>
            <% like = comment.likes_count > 0 ? 'Likes' : 'Like' %>
            <% likes_count = comment.likes_count > 0 ? comment.likes_count : '' %>
            <%= content_tag :span, "#{likes_count} #{like}", class: "text-sm" %>
          <% end %>
          <%= hover_card_content do %>
            <div>
              <ul>
                <% users = users_who_liked_comment(comment) %>
                <% users.each do |user| %>
                  <li class="text-sm"><%= user %></li>
                <% end %>
              </ul>
            </div>
          <% end %>
        <% end %>
      </div>
      <% if current_user %>
        <div class="flex justify-between mt-2 px-12">
          <%= turbo_frame_tag dom_id(comment, :like_button), src:  liked_status_comment_likes_path(comment) do %>
          <% end %>
          <% if current_user && current_user.id == comment.client_id %>
            <div class="flex justify-end gap-4">
              <%= link_to edit_comment_path(comment), class: "group hover:text-[#FACC15] flex items-center" do %>
                <svg xmlns="http://www.w3.org/2000/svg" height="16px" viewBox="0 -960 960 960" width="16px" fill="black" class="group-hover:fill-[#FACC15]"><path d="M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"/></svg>
                <span>Edit</span>
              <% end %>

              <%= link_to comment_path(comment), data: { turbo_method: :delete, confirm: 'Are you sure?' }, class: "group hover:text-[#FACC15] flex items-center" do %>
                <svg xmlns="http://www.w3.org/2000/svg" height="16px" viewBox="0 -960 960 960" width="16px" fill="black" class="group-hover:fill-[#FACC15]"><path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/></svg>
                <span>Delete</span>
              <% end %>
            </div>
          <% end %>
        </div>
      <% end %>
    <% else %>
      <div class="w-full flex gap-2 items-center">
        <div class="w-[40px] h-[40px] rounded-full bg-[#f2f2f2] flex justify-center items-center">
          <% if freelancer.avatar_url.present? %>
            <!-- <%= image_tag(freelancer.avatar_url, alt: "#{freelancer.id}_avatar") %> -->
          <% else %>
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="black">
              <path d="M480-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47ZM160-160v-112q0-34 17.5-62.5T224-378q62-31 126-46.5T480-440q66 0 130 15.5T736-378q29 15 46.5 43.5T800-272v112H160Zm80-80h480v-32q0-11-5.5-20T700-306q-54-27-109-40.5T480-360q-56 0-111 13.5T260-306q-9 5-14.5 14t-5.5 20v32Zm240-320q33 0 56.5-23.5T560-640q0-33-23.5-56.5T480-720q-33 0-56.5 23.5T400-640q0 33 23.5 56.5T480-560Zm0-80Zm0 400Z"/>
            </svg>
          <% end %>
        </div>
        <div>
          <p class="text-base font-semibold"><%= freelancer.full_name %></p>
          <p class="text-base"><%= "#{freelancer.city}, #{freelancer.country}" %> - freelancer</p>
        </div>
      </div>
      <div class="w-full mt-1 text-wrap">
        <p><%= comment.subject %></p>
      </div>
      <div class="text-sm flex justify-end">
        <%= render_hover_card do %>
          <%= hover_card_trigger do %>
            <% like = comment.likes_count > 0 ? 'Likes' : 'Like' %>
            <% likes_count = comment.likes_count > 0 ? comment.likes_count : '' %>
            <%= content_tag :span, "#{likes_count} #{like}", class: "text-sm" %>
          <% end %>
          <%= hover_card_content do %>
            <div>
              <ul>
                <% users = users_who_liked_comment(comment) %>
                <% users.each do |user| %>
                  <li class="text-sm"><%= user %></li>
                <% end %>
              </ul>
            </div>
          <% end %>
        <% end %>
      </div>
      <% if current_user %>
        <div class="flex justify-between mt-2 px-12">
          <%= turbo_frame_tag dom_id(comment, :like_button), src:  liked_status_comment_likes_path(comment) do %>
          <% end %>
          <% if current_user && current_user.id == comment.freelancer_id %>
            <div class="flex justify-end gap-4">
              <%= link_to edit_comment_path(comment), class: "group hover:text-[#FACC15] flex items-center" do %>
                <svg xmlns="http://www.w3.org/2000/svg" height="16px" viewBox="0 -960 960 960" width="16px" fill="black" class="group-hover:fill-[#FACC15]"><path d="M200-200h57l391-391-57-57-391 391v57Zm-80 80v-170l528-527q12-11 26.5-17t30.5-6q16 0 31 6t26 18l55 56q12 11 17.5 26t5.5 30q0 16-5.5 30.5T817-647L290-120H120Zm640-584-56-56 56 56Zm-141 85-28-29 57 57-29-28Z"/></svg>
                <span>Edit</span>
              <% end %>

              <%= link_to comment_path(comment), data: { turbo_method: :delete, confirm: 'Are you sure?' }, class: "group hover:text-[#FACC15] flex items-center" do %>
                <svg xmlns="http://www.w3.org/2000/svg" height="16px" viewBox="0 -960 960 960" width="16px" fill="black" class="group-hover:fill-[#FACC15]"><path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/></svg>
                <span>Delete</span>
              <% end %>
            </div>
          <% end %>
        </div>
      <% end %>
    <% end %>
  </div>
<% end %>