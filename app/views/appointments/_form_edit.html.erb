<%= render_dialog do %>
  <%= dialog_trigger do %>
    <svg xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24" 
      fill="currentColor" 
      class="cursor-pointer text-muted-foreground hover:text-foreground w-3 h-3">
      <path d="M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z" />
    </svg>

  <% end %>
  <%= dialog_content do %>
    <div class='flex flex-col gap-4' data-controller='appointment'>
      <%= render_form_for appointment,
        url: appointment_path(appointment), 
        method: :put,
        class: 'flex flex-col gap-4' do |f| %>
        <%= f.label :description %>
        <%= f.text_area :description do %><%= appointment.description %><% end %>

        <div class='flex flex-row gap-2'>
          <div class='w-full flex flex-col gap-4'>
            <%= f.label 'Date Range' %>
            <%= render_input name: 'Date Range', 
              placeholder: appointment.start.strftime('%Y / %m / %d'), 
              value: appointment.start,
              data: { appointment_target: 'dateInput' } %>
          </div>

          <div class='w-24 flex flex-col gap-4'>
            <%= f.label :duration %>
            <%= f.select_field :duration, 
              selected: appointment.duration,
              data: { appointment_target: 'durationInput' } do |select| %>
              <% appointment.total_hours.times do |i| %>
                <%= select.option label: i + 1, value: i + 1 %>
              <% end %>
            <% end %>
          </div>
        </div>
        <%= f.submit 'Update' %>
      <% end %>
    </div>
  <% end %>
<% end %>
